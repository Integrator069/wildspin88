function numberWithCommas(num){ return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ','); }

function upperFirstLetter(text){
    let result_text = text.charAt(0).toUpperCase() + text.slice(1);
    return result_text;
}

function getRandomElement(array){
    let randomIndex   = Math.floor(Math.random() * array.length);
    let randomElement = array[randomIndex];
    return randomElement;
}

async function getCloudflareJSON(){
    let data = await fetch('https://www.cloudflare.com/cdn-cgi/trace').then(res=>res.text())
    let arr = data.trim().split('\n').map(e=>e.split('='))
    return Object.fromEntries(arr)
}

const getDateRange = (firstDate, lastDate) => {

    if(moment(firstDate, 'YYYY-MM-DD').isSame(moment(lastDate, 'YYYY-MM-DD'), 'day'))
    return [lastDate];

    let   date  = firstDate;
    const dates = [ moment(date).format('LL') ];

    do{
        date = moment(date).add(1, 'day');
        dates.push(date.format('LL'));
    }while(moment(date).isBefore(lastDate));

    return dates;
    
};

function get_current_week(){

    let timezone = moment().tz('Asia/Manila');

    let week_start = timezone.startOf('isoWeek');
    let this_week = [];
    for(var i = 0; i <= 6; i++){ this_week.push(moment(week_start).add(i, 'days').format('LL')); }
   
    return this_week;

}

function get_last_week(){

    let timezone = moment().tz('Asia/Manila');

    let week_start = timezone.subtract(1, 'weeks').startOf('isoWeek');
    let last_week = [];
    for(var i = 0; i <= 6; i++){ last_week.push(moment(week_start).add(i, 'days').format('LL')); }
   
    return last_week;

}
