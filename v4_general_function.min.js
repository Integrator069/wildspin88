function numberWithCommas(num){ return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ','); }

// %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% //

function upperFirstLetter(text){
    let result_text = text.charAt(0).toUpperCase() + text.slice(1);
    return result_text;
}

// %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% //

function getRandomElement(array){
    let randomIndex   = Math.floor(Math.random() * array.length);
    let randomElement = array[randomIndex];
    return randomElement;
}

// %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% //

async function getCloudflareJSON(){
    let data = await fetch('https://www.cloudflare.com/cdn-cgi/trace').then(res=>res.text())
    let arr = data.trim().split('\n').map(e=>e.split('='))
    return Object.fromEntries(arr)
}

// %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% //

const getDateRange = (firstDate, lastDate) => {

    if(moment(firstDate, 'YYYY-MM-DD').isSame(moment(lastDate, 'YYYY-MM-DD'), 'day'))
    return [lastDate];

    let   date  = firstDate;
    const dates = [ moment(date).format('LL') ];

    do{
        date = moment(date).add(1, 'day');
        dates.push(date.format('LL'));
    }while(moment(date).isBefore(lastDate));

    return dates;
    
};

// %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% //

function get_current_week(){

    let timezone = moment().tz('Asia/Manila');

    let week_start = timezone.startOf('isoWeek');
    let this_week = [];
    for(var i = 0; i <= 6; i++){ this_week.push(moment(week_start).add(i, 'days').format('LL')); }
   
    return this_week;

}

// %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% //

function get_last_week(){

    let timezone = moment().tz('Asia/Manila');

    let week_start = timezone.subtract(1, 'weeks').startOf('isoWeek');
    let last_week = [];
    for(var i = 0; i <= 6; i++){ last_week.push(moment(week_start).add(i, 'days').format('LL')); }
   
    return last_week;

}

// %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% //

function dated_today(){

    let timezone = moment().tz('Asia/Manila');

    let today       = timezone.format('LL');
    let today_dated = `("${ today }")`;

    return today_dated;

}

// %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% //

function dated_yesterday(){

    let timezone = moment().tz('Asia/Manila');

    let yesterday       =  timezone.subtract(1, 'days').format('LL');
    let yesterday_dated = `("${ yesterday }")`;

    return yesterday_dated;

}

// %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% //

function dated_this_week(){

    let this_week = get_current_week();
    let this_week_dated = `("${ this_week[0] }", "${ this_week[1] }", "${ this_week[2] }", "${ this_week[3] }", "${ this_week[4] }", "${ this_week[5] }", "${ this_week[6] }")`;

    return this_week_dated;

}

// %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% //

function dated_last_week(){

    let last_week = get_last_week();
    let last_week_dated = `("${ last_week[0] }", "${ last_week[1] }", "${ last_week[2] }", "${ last_week[3] }", "${ last_week[4] }", "${ last_week[5] }", "${ last_week[6] }")`; 

    return last_week_dated;

}

// %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% BREAK %%% //

